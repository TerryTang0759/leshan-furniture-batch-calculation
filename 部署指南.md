# 🚀 乐山家具定制批量计算系统 - 部署指南

## 📋 系统概述
这是一个专为乐山家具定制设计的批量投影面积计算系统，能够根据柜体尺寸自动计算所有材质的投影面积单价。

## 🌐 Vercel部署（推荐）

### 步骤1：导入项目
1. 访问 https://vercel.com
2. 点击 "New Project"
3. 导入仓库：`TerryTang0759/leshan-furniture-batch-calculation`

### 步骤2：配置环境变量
在Vercel控制台的 "Environment Variables" 中添加：

| 变量名 | 值 |
|--------|-----|
| `MONGODB_USERNAME` | `terry07590759` |
| `MONGODB_PASSWORD` | `Na0E6iNR4p3gGNg1` |
| `MONGODB_CLUSTER` | `cluster0.zqsy7.mongodb.net` |
| `MONGODB_DATABASE` | `Leshan20250911` |
| `MONGODB_COLLECTION` | `price_template` |
| `NODE_ENV` | `production` |

### 步骤3：部署
1. 点击 "Deploy" 按钮
2. 等待部署完成
3. 获得访问域名

## 💻 本地部署

### 安装依赖
```bash
npm install
```

### 启动服务
```bash
node api.js
```

### 访问系统
打开浏览器访问：http://localhost:3001

## 📁 核心文件

### 系统文件
- `api.js` - API服务器
- `batch.html` - 批量计算系统主页面
- `package.json` - 项目配置
- `vercel.json` - Vercel部署配置

### 启动脚本
- `启动批量计算系统.sh` - 一键启动脚本

## 🎯 使用说明

### 输入数据
- **高度 (mm)**: 柜体高度
- **宽度 (mm)**: 柜体宽度
- **深度 (mm)**: 柜体深度

### 计算流程
1. 自动计算层板数量
2. 计算柜体拆板面积
3. 获取所有材质价格
4. 计算投影面积单价
5. 排序显示结果

### 输出结果
- 33种材质的投影面积单价
- 详细的计算步骤
- 统计数据汇总

## 🔍 验证部署

### 测试功能
1. 访问部署域名
2. 输入测试数据：高2000mm，宽800mm，深600mm
3. 点击"批量计算所有材质投影面积单价"
4. 验证计算结果

### API测试
- 健康检查：`/api/health`
- 材质价格：`/api/prices`
- 批量计算：`/api/batch-calculate?height=2000&width=800&depth=600`

## 🆘 故障排除

### 常见问题
1. **部署失败**: 检查环境变量配置
2. **API无法访问**: 确认MongoDB连接设置
3. **计算结果异常**: 验证输入数据格式

### 技术支持
- **项目**: 乐山家具定制批量投影面积计算系统
- **品牌**: 乐山家具定制
- **仓库**: https://github.com/TerryTang0759/leshan-furniture-batch-calculation

---

**🏠 乐山家具定制** - 让投影面积计算变得简单高效！
