# 🚀 部署说明

## 📋 部署选项

### 1. GitHub Pages（静态部署）
适合纯前端版本，无需后端API

```bash
# 启用GitHub Pages
1. 进入仓库 Settings
2. 找到 Pages 选项
3. 选择 Source: Deploy from a branch
4. 选择 main 分支
5. 访问 https://YOUR_USERNAME.github.io/leshan-furniture-batch-calculation
```

### 2. Vercel（全栈部署）
推荐方案，支持前后端完整功能

```bash
# 安装Vercel CLI
npm install -g vercel

# 部署
vercel

# 配置环境变量
vercel env add MONGODB_USERNAME
vercel env add MONGODB_PASSWORD
vercel env add MONGODB_CLUSTER
vercel env add MONGODB_DATABASE
vercel env add MONGODB_COLLECTION
```

### 3. Netlify（全栈部署）
```bash
# 连接GitHub仓库
1. 登录 netlify.com
2. 选择 "New site from Git"
3. 连接GitHub仓库
4. 配置构建设置
5. 添加环境变量
```

### 4. Heroku（后端部署）
```bash
# 安装Heroku CLI
npm install -g heroku

# 登录并创建应用
heroku login
heroku create leshan-furniture-batch

# 部署
git push heroku main

# 配置环境变量
heroku config:set MONGODB_USERNAME=your_username
heroku config:set MONGODB_PASSWORD=your_password
heroku config:set MONGODB_CLUSTER=your_cluster.mongodb.net
heroku config:set MONGODB_DATABASE=your_database
heroku config:set MONGODB_COLLECTION=price_template
```

## 🔧 环境变量配置

### MongoDB连接配置
```env
MONGODB_USERNAME=your_mongodb_username
MONGODB_PASSWORD=your_mongodb_password
MONGODB_CLUSTER=your_cluster.mongodb.net
MONGODB_DATABASE=your_database_name
MONGODB_COLLECTION=price_template
```

### 服务器配置
```env
PORT=3001
NODE_ENV=production
```

## 📁 部署文件结构

```
leshan-furniture-batch-calculation/
├── api.js                      # API服务器
├── package.json                # 依赖配置
├── vercel.json                 # Vercel部署配置
├── 测试页面.html               # 主页面
├── 批量计算系统.html           # 完整系统
├── index.html                  # 单个计算系统
├── 启动批量计算系统.sh         # 启动脚本
├── README.md                   # 项目说明
├── 使用说明.md                 # 使用指南
├── 计算逻辑说明.md             # 计算逻辑
└── 部署说明.md                 # 部署指南
```

## 🌐 访问地址

部署完成后，可以通过以下地址访问：

### 本地开发
- 测试页面: http://localhost:3001/test
- 完整系统: http://localhost:3001
- API接口: http://localhost:3001/api/prices

### 云端部署
- Vercel: https://your-app.vercel.app
- Netlify: https://your-app.netlify.app
- Heroku: https://your-app.herokuapp.com

## 🔒 安全配置

### MongoDB安全设置
1. 创建专用数据库用户
2. 设置IP白名单
3. 启用SSL连接
4. 定期更新密码

### 环境变量安全
1. 不要在代码中硬编码敏感信息
2. 使用环境变量存储配置
3. 定期轮换密钥
4. 限制访问权限

## 📊 性能优化

### 前端优化
- 启用Gzip压缩
- 使用CDN加速
- 优化图片资源
- 启用浏览器缓存

### 后端优化
- 数据库连接池
- API响应缓存
- 错误日志记录
- 性能监控

## 🎯 推荐部署方案

### 开发环境
```bash
# 本地开发
npm install
node api.js
```

### 生产环境
```bash
# 推荐使用Vercel
1. 连接GitHub仓库
2. 自动部署
3. 配置环境变量
4. 享受全球CDN加速
```

---

**乐山家具定制** - 让系统部署变得简单高效！
